#### 作用域与标识符的有效区域

不论是在程序的什么位置，使用到的每个标识符都会指向一个特定的实体：变量、函数、类型等。

**作用域**（scope）是程序的一部分，在其中名字有特定的含义。C++中大多数作用域都以花括号分隔。

同一个标识符在不同的作用域中可能指向不同的实体。**标识符的有效区域始于标识符的声明语句，以声明语句所在的作用域末端为结束**。

```cpp
#include <iostream>

int main() {
	int sum = 0;
	for (int ind = 0; ind <= 10; ind++) {
		sum += ind;
	}
	std::cout << "Sum of 1 to 10 inclusive is " << sum << std::endl;
	return 0;
}
```

上述程序使用了三个标识符，分别为`main`,`sum`,`val`。

- 标识符`main`定义于所有花括号之外，他和其他大多数定义在函数体之外的名字一样拥有**全局作用域**。一旦声明之后，全局作用域内的名字在整个程序范围内都可以被使用。
- `sum`定义于`main`函数所限定的定义域之内，从声明`sum`开始直到`main`函数结束为止都可以访问它，但是在函数块外就无法访问了。因此，我们说`sum`具有**块作用域**。同样的`val`仅在`for`循环中可以访问。

#### 嵌套作用域

作用域可以彼此包含。被包含的作用域被称为**内层作用域**，包含着别的作用域的作用域被称为**外层作用域**。

作用域中一旦声明了某个标识符，他所嵌套的所有作用域中都可以访问到该名字。

允许在内层作用域中重新定义外层作用域中已存在的名字，此时在内层作用域中该标识符表示的原对象将变得不可访问。

除此之外，还可以使用作用域操作符`::`访问某个特定类或命名空间，以覆盖默认的作用域规则。特殊的，当作用域左侧为空时，将访问全局作用域。

```cpp
#include <iostream>
using std::cout; //访问STL命名空间
using std::endl; //访问STL命名空间

int sum = 20;
int main() {
	int sum = 0; //覆盖全局变量sum
	for (int i = 0; i <= 10; i++) {
		sum += i;
	}
	::sum += sum; //全局变量sum += main中的sum变量
	cout << "Sum at main() is " << sum
		<< " and Sum with global scope is " << ::sum << endl; //使用 :: 访问全局作用域
}
```

