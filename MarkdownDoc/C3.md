# Chapter 3 数组

[toc]

**数组是存放类型相同的对象的容器**。这些对象本身没有名字，需要通过其所在位置访问。

> 和标准库类型`vector`相比，**数组的大小是固定不变的**，无法随意向数组中增加元素。**如果不清楚元素的确切个数，应该使用`vector`类型**。<font color = blue>【参考标准库类型`vector`部分】</font>

## **3.1 定义和初始化数组**

### 数组的定义

**数组属于复合类型**，数组的一般声明形如`a[d]`，其中`a`是数组的名字，`d`是数组的维度。

```cpp
int arr[20];
bool flag[10];
string strArr[5];
```

**定义规则**

- 维度`d`说明了数组中元素的个数，因此必须大于0.
- 数组中元素的个数属于数组类型的一部分，编译的时候维度应该是已知的，因此**维度必须是一个常量（表达式）**。
- 默认情况下，数组的元素会被**默认初始化**<font color = blue>【参考初始化部分】</font>。
- 定义数组的时候必须指定数组的类型，不允许使用`auto`关键字由初始值的列表推断类型。
- 数组的元素应为对象，因此不存在引用的数组。

### 数组的初始化

<font color = blue>【参考初始化部分】</font>

可以对数组的元素进行列表初始化。此时，允许**忽略数组的维度**，如果在声明时没有指定维度，编译器会根据初始值的数量计算并推测出来。相反，如果指定了维度，那么**初始值的数量不应该超出指定的大小**。如果维度比提供的初始值数量大，则使用提供的初始值初始化靠前的元素，剩下的元素执行值初始化（`zero`初始化）。

```cpp
int arr[3] = { 1, 2, 3 };
bool flag[2]{ true, false };
string str[12] = { "nice", "to", "meet", "you" };	//剩下的元素被初始化为空字符串
char vowel[] = { 'a', 'e', 'i', 'o', 'u' };		//d = 5
```

### 不允许拷贝和赋值

不能将数组的内容拷贝给其他数组作为初始值，也不能用数组为其他数组赋值。

### 理解复杂的数组声明

由内向外的阅读有利于理解复杂数组的声明。

```cpp
int arr[5] = { 0, 1, 2, 3, 4 };
int* arrPtr[2] = { nullptr, &arr[2] };	//arrPtr为对象标识符
										//类型说明符为int*[2]。说明arrPtr是维度为2的int*类型的数组
int(*ptrArr)[5] = &arr;	//*ptrArr说明ptrArr为指针
						//类型说明符为int[5]，说明ptrArr是指向维度为5的int类型的数组的指针
int(&refArr)[5] = arr;		//&refArr说明refArr为引用
							//类型说明符为int[5]，说明refArr引用一维度为5的int类型的数组
int* (&refArrPtr)[2] = arrPtr;		//同上，refArrPtr引用一维度为2的数组，该数组存储的对象的类型为int*
```

## **3.2 指针和数组元素**

### 使用下标访问数组元素

数组的元素可以使用下标运算符来访问。**数组的索引从0开始**，对于维度为`d`的数组来说，其下标范围为`0 ~ (d-1)`。

数组下标的类型为`size_t`（通常可以定义为`unsigned int`）。需要注意的是，数组的下标是否在合理范围内由程序员负责检查。所谓合理就是说下标应该大于等于0并且小于数组的大小。

![VS2019](..\Pic\DefinitionOfCommonTypes.png)

> **不要使用`int`定义数组下标**
>
> 